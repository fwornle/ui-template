@startuml aws-architecture
!include _standard-style.puml

' AWS Icons for PlantUML v20.0 (2025)
!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist
!include AWSPuml/AWSCommon.puml
!include AWSPuml/AWSSimplified.puml
!include AWSPuml/Groups/AWSCloud.puml
!include AWSPuml/Groups/Region.puml
!include AWSPuml/Compute/Lambda.puml
!include AWSPuml/Storage/SimpleStorageService.puml
!include AWSPuml/NetworkingContentDelivery/CloudFront.puml
!include AWSPuml/NetworkingContentDelivery/APIGateway.puml
!include AWSPuml/SecurityIdentityCompliance/Cognito.puml
!include AWSPuml/ManagementGovernance/CloudWatch.puml
!include AWSPuml/General/User.puml
!include AWSPuml/General/Client.puml

title UI Template - AWS Infrastructure Architecture

' Layout: vertical for documentation (narrow, scrollable)
top to bottom direction

' External User
User(user, "End User", "Browser/Mobile")

' AWS Cloud
AWSCloudGroup(cloud, "AWS Cloud") {
    RegionGroup(region, "eu-central-1") {

        ' CloudFront CDN
        CloudFront(cloudfront, "CloudFront Distribution", "Global CDN with HTTPS")

        ' S3 Static Website
        SimpleStorageService(s3, "S3 Bucket", "Static Website Hosting")

        ' API Gateway HTTP API
        APIGateway(apigw, "API Gateway", "HTTP API (v2)")

        ' Lambda Function
        Lambda(lambda, "Lambda Function", "API Handler")

        ' Cognito User Pool
        Cognito(cognito, "Cognito User Pool", "Authentication & User Management")

        ' CloudWatch
        CloudWatch(cloudwatch, "CloudWatch", "Logs & Metrics")
    }
}

' Connections
user --> cloudfront : "HTTPS Request"
cloudfront --> s3 : "Static Assets\n(React App)"
cloudfront --> apigw : "API Requests\n(/api/*)"
apigw --> lambda : "Invoke"
lambda --> cognito : "Validate JWT"
lambda --> cloudwatch : "Logs & Metrics"
user ..> cognito : "Sign In/Sign Up\n(Amplify SDK)"

' Notes
note right of cloudfront
  **CloudFront Features**
  - Global edge locations
  - HTTPS termination
  - SPA routing support
  - Automatic compression
end note

note right of cognito
  **Cognito Configuration**
  - Email/password auth
  - JWT token generation
  - 1hr access token validity
  - 30-day refresh token
end note

note right of apigw
  **API Gateway HTTP API**
  - Low latency, cost-effective
  - Built-in CORS support
  - Auto-scaling
  - Corporate SCP compliant
end note

note right of lambda
  **Lambda Function**
  - Invoked by API Gateway
  - 30s timeout, 256MB
  - CloudWatch logging
end note

note bottom of s3
  **S3 Static Site**
  - Vite React build
  - CloudFront origin
  - Private bucket
end note

@enduml
