@startuml aws-architecture
!include _standard-style.puml

title UI Template - AWS Architecture (SST v3)

skinparam componentStyle rectangle

' External actors
actor "User" as user

' AWS Cloud boundary
cloud "AWS Cloud" {

    ' SST Framework boundary
    rectangle "SST v3 Infrastructure" as sst #F0F8FF {

        ' CloudFront CDN
        node "CloudFront\nDistribution" as cloudfront {
            component "CDN" as cdn
        }

        ' S3 Static Hosting
        database "S3 Bucket\n(Static Website)" as s3 {
            artifact "React App\n(index.html, JS, CSS)" as frontend
        }

        ' Lambda with Function URL
        node "Lambda" as lambda {
            component "Function URL\n(HTTPS)" as funcurl
            component "API Handler" as apihandler
        }

        ' Cognito
        node "Cognito" as cognito {
            component "User Pool" as userpool
            component "User Pool\nClient" as userpoolclient
        }

        ' CloudWatch
        node "CloudWatch" as cloudwatch {
            component "Logs" as logs
            component "Metrics" as metrics
        }
    }
}

' Connections
user --> cdn : HTTPS

cdn --> frontend : Static Assets\n(/*)
cdn --> funcurl : API Requests\n(/api/*)

funcurl --> apihandler : Route

apihandler --> logs : Write Logs
apihandler --> metrics : Emit Metrics

frontend ..> userpoolclient : Amplify SDK\n(Sign In/Up)
userpoolclient --> userpool : Authentication

' Notes
note right of sst
  **SST v3 Framework**
  - Infrastructure as Code
  - Pulumi/Terraform engine
  - Live Lambda development
  - Automatic deployments
end note

note right of cloudfront
  **CloudFront Distribution**
  - HTTPS termination
  - Global edge caching
  - SPA routing (404 -> index.html)
end note

note right of cognito
  **Cognito User Pool**
  - Email/password auth
  - JWT token generation
  - User management
end note

note bottom of lambda
  **Lambda Function URL**
  - Direct HTTPS endpoint
  - No API Gateway needed
  - Node.js 20.x runtime
  - Built-in CORS support
end note

@enduml
